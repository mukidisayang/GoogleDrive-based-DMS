{% extends 'LesPolypodesSimpleDMSBundle::layout.html.twig' %}


{% block content %}
<div class="row">
    {% if folders is defined and 0 < folders|length %}
        <div class="col-md-6">
            <h3>Your folders:</h3>
            <ul>
                {% for folder in folders.list %}
                    <li><a href="{{ url("_api_folder", {folderId: folder.id} ) }}">{{ folder.title }}</a></li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if usages is defined and 0 < usages|length %}
        <div class="col-md-6">
            <h3>Your Google Drive Usage Stats:</h3>
            <ul>
                {% for label, usage in usages %}
                    <li><b>{{ label }}</b>{{ usage }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</div>

{% if items is defined and 0 < items|length %}
    <div class="row">
    <form class="form-inline" name="form" role="form" action="" method="GET">
        {{ form_errors(form) }}
        <div class="form-group">
            {{ form_label(form.q) }}
            {{ form_widget(form.q, { 'attr': {'class': 'form-control', 'placeholder': 'search for...'} }) }}
            {{ form_widget(form.pageToken, { 'value': '' }) }} {# we reset it: submitting new form musn't take this token in account again#}
        </div>
        {{ form_rest(form) }}
        <div class="form-group">
            <button type="submit" class="btn btn-default">{{ 'Find' | trans }}</button>
            <a class="btn btn-default" href="{{ url("_files") }}?q=">Reset</a>

        </div>
        <hr />
        </form>

        {% if has_pagination %}
            {% include "@LesPolypodesSimpleDMS/Website/paginator.html.twig"
                with {
                    'has_pagination':   has_pagination,
                    'pagination':       pagination,
            }
        %}
        {% endif %}

        </div>
        <div class="row">
        {% for file in items %}
            <div class="col-md-4">
                {% include "@LesPolypodesSimpleDMS/Website/file.html.twig"
                    with {"file": file} %}
            </div>
        {% endfor %}
    </div>
{% endif %}

{% javascripts '@LesPolypodesSimpleDMSBundle/Resources/public/js/*' output='js/vendors/main.js' %}
<script type="text/javascript" src="{{ asset_url }}"></script>
{% endjavascripts %}

{% endblock %}
